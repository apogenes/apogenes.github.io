---
layout: post
title: "특정 단말에서 layout view measure 이슈가 있었을 때 처리방법" 
date:   2017-08-29 15:30:00 +0900
categories: android
---
보통 안드로이드 개발을 할 시에 개발자 혼자서 레이아웃과 비지니스코드 둘다 개발을 합니다.

비즈니스코드야 각 회사의 서비스에 맞게 개발하는 것이 일반적인 자바 개발자와 크게 다르지 않게 개발을 할 수 있다고 생각이 듭니다만, 레이아웃의 경우 회사의 디자이너가 얼마나 많은 걸 요구하냐에 따라 천국과 지옥을 오갈 수 있습니다.

지금은 조금 나아졌지만 이전에는 아이폰의 디자인을 안드로이드에 고대로 입힌다던지 반대의 경우로 처리를 해달라는 케이스도 적지 않게 있었죠.

아무튼 조금 복잡한 레이아웃으로 리스트 형태의 개발을 할 시에 앱이 죽는 상황이 있었습니다.
더군다나 안드로이드 개발자들이 극구로 혐오하는 `특정단말`에서의 이슈였었습니다.

RecyclerViwe 안에 들어가는 ViewHolder 레이아웃의 구조로는 우측에 이미지가 있고 왼쪽에 텍스트가 `ellipsize="end"` 속성이 들어가 있었지만 `maxlines="1"` 로 들어가 있었습니다.

리스트 화면에 들어가자마자 앱이 죽는 이슈가 있었고 오류메시지를 토대로 찾아본 결과,
view 각 자신의 영역을 찾아 ellipsize 속성을 적용하면서  measure 하는 과정 중에 크래시가 발생. 
지금은 Deprecated 된 `singleLine="true"` 옵션을 넣어야지만 정상적으로 처리가 되었습니다.

떄문에 앞으로 한줄 영역의 레이아웃이 들어갈 시엔 다음과 같은 옵션을 기본으로 해주는게 좋습니다.
{% highlight xml %}
<TextView
	android:maxLines="1"
	android:singleLine="true"
	android:ellipsize="end"
/>
{% endhighlight %}
